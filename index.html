<!-- Load TensorFlow.js. This is required -->
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Filter Spam Files</title>
    </head>
    <body>
        <img
            id="display-image"
            src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSOlJA999-VQCDWy6_p1uY_WWoxUeHKjhWOoA&usqp=CAU"
            width="300"
            alt=""
        />
        <ul
            id="display-nsfwjs"
            style="margin-top: 8px; list-style: none"
        ></ul>
        <script
            src="https://unpkg.com/@tensorflow/tfjs@2.6.0"
            type="text/javascript"
        ></script>
        <script src="https://unpkg.com/nsfwjs@2.3.0" type="text/javascript"></script>
        
        <!-- For testing: Load from local bundle `yarn scriptbundle && yarn minbundle` -->
        <!-- <script src="../../dist/nsfwjs.min.js"></script> -->
        
        <script>
            // const nsfwjs = require('nsfwjs')
            const nsfwjsDom = document.getElementById('display-nsfwjs');
            const imageDom = document.getElementById('display-image');
        
            const img = new Image();
            img.crossOrigin = 'anonymous';
            // some image here
            img.src = 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSOlJA999-VQCDWy6_p1uY_WWoxUeHKjhWOoA&usqp=CAU';
            // imageDom.src = "https://i.imgur.com/Kwxetau.jpg";
        
            // Load the model.
            nsfwjs.load().then((model) => {
                // Classify the image.
                model.classify(img).then((predictions) => {
                    predictions.forEach((prediction) => {
                        const node = document.createElement('li');
                        const textnode = document.createTextNode(
                            `${prediction.className} ${(
                                prediction.probability * 100
                            ).toFixed(2)}%`
                        );
                        // Append the text node to the "li" node:
                        node.appendChild(textnode);
                        nsfwjsDom.appendChild(node);
                    });
                    console.log('Predictions', predictions);
                });
            });
        </script>
        <pre>Checkout console.log output for results!</pre>
    </body>
</html>
